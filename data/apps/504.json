{
  "task_id": "APPS/504",
  "problem_id": 504,
  "prompt": "Recently Max has got himself into popular CCG \"BrainStone\". As \"BrainStone\" is a pretty intellectual game, Max has to solve numerous hard problems during the gameplay. Here is one of them:\n\nMax owns n creatures, i-th of them can be described with two numbers \u2014 its health hp_{i} and its damage dmg_{i}. Max also has two types of spells in stock:  Doubles health of the creature (hp_{i} := hp_{i}\u00b72);  Assigns value of health of the creature to its damage (dmg_{i} := hp_{i}). \n\nSpell of first type can be used no more than a times in total, of the second type \u2014 no more than b times in total. Spell can be used on a certain creature multiple times. Spells can be used in arbitrary order. It isn't necessary to use all the spells.\n\nMax is really busy preparing for his final exams, so he asks you to determine what is the maximal total damage of all creatures he can achieve if he uses spells in most optimal way.\n\n\n-----Input-----\n\nThe first line contains three integers n, a, b (1 \u2264 n \u2264 2\u00b710^5, 0 \u2264 a \u2264 20, 0 \u2264 b \u2264 2\u00b710^5) \u2014 the number of creatures, spells of the first type and spells of the second type, respectively.\n\nThe i-th of the next n lines contain two number hp_{i} and dmg_{i} (1 \u2264 hp_{i}, dmg_{i} \u2264 10^9) \u2014 description of the i-th creature.\n\n\n-----Output-----\n\nPrint single integer \u2014 maximum total damage creatures can deal.\n\n\n-----Examples-----\nInput\n2 1 1\n10 15\n6 1\n\nOutput\n27\n\nInput\n3 0 3\n10 8\n7 11\n5 2\n\nOutput\n26\n\n\n\n-----Note-----\n\nIn the first example Max should use the spell of the first type on the second creature, then the spell of the second type on the same creature. Then total damage will be equal to 15 + 6\u00b72 = 27.\n\nIn the second example Max should use the spell of the second type on the first creature, then the spell of the second type on the third creature. Total damage will be equal to 10 + 11 + 5 = 26.",
  "solutions": "[\"# python3\\nfrom sys import stdin\\nfrom collections import namedtuple\\n\\n\\ndef readline(): return tuple(map(int, input().split()))\\n\\n\\nn, a, b = readline()\\nhand = [tuple(map(int, line.split())) for line in stdin.readlines()]\\n\\nif not b:\\n    print(sum(creature[1] for creature in hand))\\nelse:\\n    hand.sort(key=lambda self: self[0] - self[1])\\n\\n    best = 0\\n    if n > b:\\n        l = hand[n - b]\\n        lost = max(0, l[0] - l[1])\\n        for creature in hand[:n-b]:\\n            best = max(best, (creature[0] << a) - creature[1] - lost)\\n\\n    for creature in hand[max(0,n-b):]:\\n        best = max(best, (creature[0] << a) - max(creature))\\n\\n    print((sum(creature[1] for creature in hand)\\n          + sum(max(0, creature[0] - creature[1]) for creature in hand[max(0,n-b):])\\n          + best))\\n\", \"# python3\\nfrom sys import stdin\\n\\n\\ndef readline(): return tuple(map(int, input().split()))\\n\\n\\ndef bdiff(creature): return max(0, creature[0] - creature[1])\\n\\n\\nn, a, b = readline()\\nhand = [tuple(map(int, line.split())) for line in stdin.readlines()]\\n\\nans = sum(creature[1] for creature in hand)  # default damage\\nif b:\\n    hand.sort(key=bdiff)\\n\\n    best = 0\\n    if n > b:\\n        lost = bdiff(hand[n - b])\\n        for creature in hand[:n-b]:\\n            best = max(best, (creature[0] << a) - creature[1] - lost)\\n\\n    for creature in hand[max(0,n-b):]:\\n        best = max(best, (creature[0] << a) - max(creature))\\n        ans += bdiff(creature)\\n    ans += best\\n\\nprint(ans)\\n\", \"# python3\\nfrom sys import stdin\\n\\ndef main():\\n    def parseints(line): return tuple(map(int, line.split()))\\n    def bdiff(creature): return max(0, creature[0] - creature[1])\\n\\n    n, a, b = parseints(input())\\n    hand = list(map(parseints, stdin.readlines()))\\n\\n    ans = sum(creature[1] for creature in hand)  # default damage\\n    if b:\\n        hand.sort(key=bdiff)\\n\\n        best = 0\\n        if n > b:\\n            lost = bdiff(hand[n - b])\\n            for creature in hand[:n-b]:\\n                best = max(best, (creature[0] << a) - creature[1] - lost)\\n\\n        for creature in hand[max(0,n-b):]:\\n            best = max(best, (creature[0] << a) - max(creature))\\n            ans += bdiff(creature)\\n        ans += best\\n\\n    print(ans)\\n\\n\\nmain()\\n\", \"# python3\\nfrom sys import stdin\\n\\ndef main():\\n    def parseints(line): return tuple(map(int, line.split()))\\n    def bdiff(creature): return max(0, creature[0] - creature[1])\\n\\n    n, a, b = parseints(input())\\n    hand = list(map(parseints, stdin.readlines()))\\n\\n    ans = sum(creature[1] for creature in hand)  # default damage\\n    if b:\\n        hand.sort(key=bdiff)\\n\\n        best = 0\\n        if n > b:\\n            lost = bdiff(hand[n - b])\\n            for creature in hand[:n-b]:\\n                best = max(best, (creature[0] << a) - creature[1] - lost)\\n\\n        for creature in hand[max(0,n-b):]:\\n            best = max(best, (creature[0] << a) - max(creature))\\n            ans += bdiff(creature)\\n        ans += best\\n\\n    print(ans)\\n\\n\\nmain()\", \"# coding=utf-8\\nfrom sys import stdin\\nrd = lambda l: tuple(map(int, l.split()))\\nn, a, b = rd(input())\\nb = min(n, b)\\ns = list(map(rd, stdin.readlines()))\\n\\nf = lambda x:max(0, x[0]-x[1])\\ng = lambda x:(x[0]<<a)-x[1]\\nans = sum(x[1] for x in s)\\nmid = 0\\nif b:\\n    s.sort(key=f, reverse=True)\\n    t = sum(f(x) for x in s[:b] )\\n    for i in range(b):\\n        mid = max(mid, t-f(s[i])+g(s[i]))\\n    for i in range(b, n):\\n        mid = max(mid, t-f(s[b-1])+g(s[i]))\\n    ans += mid\\nprint(ans)\\n\", \"def main():\\n    n, a, b = map(int, input().split())\\n    arr = [0 for _ in range(n)]\\n    brr = [0 for _ in range(n)]\\n    for i in range(n):\\n        arr[i], brr[i] = map(int,input().split())\\n\\n    p = [i for i in range(n)]\\n    p.sort(key=lambda x: arr[x]-brr[x], reverse=True)\\n    total = 0\\n    for i in range(len(arr)):\\n        if i < b:\\n            total += max(arr[p[i]], brr[p[i]])\\n        else:\\n            total += brr[p[i]]\\n\\n    if b == 0:\\n        print(total)\\n        return\\n\\n    s = total\\n    pp = 1 << a\\n    for i in range(n):\\n        ctotal = s\\n        if i < b:\\n            ctotal -= max(arr[p[i]], brr[p[i]])\\n            ctotal += arr[p[i]] * pp\\n        else:\\n            ctotal -= brr[p[i]]\\n            ctotal += arr[p[i]] * pp\\n            ctotal -= max(arr[p[b-1]], brr[p[b-1]])\\n            ctotal += brr[p[b-1]]\\n        total = max(total, ctotal)\\n\\n    print(total)\\n\\n\\nmain()\", \"def well_played():\\n    n,a,b = [int(x) for x in input().split()]\\n    p = [(0,0)] * n\\n    b= min(b,n)\\n\\n    for i in range(n):\\n        h,d =[int(x) for x in input().split()]\\n        p[i] =(h,d)\\n    p.sort(key=lambda x:x[0]-x[1],reverse=True)\\n    \\n    s=0\\n    for i in range(b):\\n        s+=max(p[i][0],p[i][1])\\n    for i in range(b,n):\\n        s+= p[i][1]\\n    \\n    ans = s\\n    for i in range(b):\\n        ans = max(ans,s - max(p[i][0],p[i][1]) + ((p[i][0]) <<a)  )\\n    s=s - max(p[b-1][0],p[b-1][1]) + p[b-1][1]\\n    if(b):\\n        for i in range(b,n):\\n            ans= max(ans,s - p[i][1] + ((p[i][0]) <<a) )\\n    print(ans)\\nwell_played() \"]",
  "input_output": "{\n  \"inputs\": [\n    \"2 1 1\\n10 15\\n6 1\\n\",\n    \"3 0 3\\n10 8\\n7 11\\n5 2\\n\",\n    \"1 0 0\\n2 1\\n\",\n    \"1 0 200000\\n1 2\\n\",\n    \"7 5 7\\n29 25\\n84 28\\n34 34\\n14 76\\n85 9\\n40 57\\n99 88\\n\",\n    \"7 6 7\\n11 75\\n61 90\\n22 14\\n100 36\\n29 48\\n69 52\\n16 3\\n\",\n    \"7 8 7\\n88 29\\n30 44\\n14 1\\n83 95\\n73 88\\n10 42\\n29 26\\n\",\n    \"12 7 7\\n78 189\\n614 271\\n981 510\\n37 762\\n803 106\\n78 369\\n787 54\\n768 159\\n238 111\\n107 54\\n207 72\\n485 593\\n\",\n    \"12 20 4\\n852 935\\n583 820\\n969 197\\n219 918\\n547 842\\n615 163\\n704 377\\n326 482\\n183 833\\n884 994\\n886 581\\n909 450\\n\",\n    \"2 13 2\\n208637 682633\\n393097 724045\\n\",\n    \"1 0 200000\\n42 1\\n\",\n    \"1 6 200000\\n42 1\\n\",\n    \"1 0 200000\\n1 42\\n\",\n    \"1 6 200000\\n1 42\\n\",\n    \"3 1 1\\n10 9\\n8 6\\n7 5\\n\",\n    \"1 1 0\\n10 1\\n\",\n    \"1 1 0\\n3 4\\n\",\n    \"3 20 0\\n1 5\\n5 1\\n5 1\\n\",\n    \"2 5 1\\n10 1\\n20 20\\n\",\n    \"3 20 0\\n3 2\\n4 3\\n5 4\\n\",\n    \"2 1 0\\n10 15\\n6 1\\n\",\n    \"5 10 0\\n20 1\\n22 1\\n30 1\\n30 5\\n40 6\\n\",\n    \"1 20 0\\n1 5\\n\",\n    \"2 3 14\\n28 5\\n32 47\\n\",\n    \"3 1 2\\n20 10\\n5 1\\n25 25\\n\",\n    \"2 3 3\\n28 5\\n32 47\\n\",\n    \"2 2 1\\n10 15\\n6 1\\n\",\n    \"2 1 2\\n20 1\\n22 23\\n\",\n    \"10 7 2\\n8 6\\n5 5\\n3 7\\n7 7\\n3 8\\n6 1\\n10 9\\n4 6\\n9 5\\n7 9\\n\",\n    \"3 8 1\\n6 6\\n7 9\\n2 5\\n\",\n    \"10 4 4\\n5 5\\n8 1\\n10 10\\n3 1\\n7 10\\n1 7\\n8 7\\n5 9\\n3 3\\n1 1\\n\",\n    \"4 8 3\\n1 6\\n10 10\\n4 8\\n9 4\\n\",\n    \"8 18 1\\n8 6\\n6 8\\n1 7\\n7 2\\n5 1\\n10 5\\n8 3\\n9 3\\n\",\n    \"2 11 1\\n1 4\\n1 5\\n\",\n    \"2 19 2\\n9 3\\n7 2\\n\",\n    \"5 13 0\\n4 4\\n8 10\\n1 8\\n3 9\\n4 6\\n\",\n    \"5 8 0\\n10 7\\n6 6\\n6 5\\n7 9\\n10 7\\n\",\n    \"5 20 2\\n1 10\\n7 8\\n10 1\\n6 5\\n2 1\\n\",\n    \"2 1 0\\n5 6\\n8 8\\n\",\n    \"7 3 5\\n2 6\\n5 9\\n5 5\\n4 10\\n5 7\\n7 8\\n3 10\\n\",\n    \"10 9 0\\n620118469 704168608\\n528098892 341451371\\n15150469 449838744\\n960504540 722185004\\n271837337 344050133\\n940943201 419522619\\n85569623 788965215\\n161962866 563795701\\n943389281 445744350\\n610994199 473866838\\n\",\n    \"10 11 1\\n7 3\\n9 4\\n1 5\\n10 3\\n6 1\\n10 7\\n8 5\\n7 6\\n1 4\\n9 9\\n\",\n    \"2 1 200000\\n44 42\\n1000 1001\\n\",\n    \"5 12 2\\n5 9\\n8 9\\n4 1\\n2 5\\n1 8\\n\",\n    \"4 8 1\\n9 9\\n7 6\\n2 4\\n6 10\\n\",\n    \"2 1 1\\n292725479 742903381\\n239450691 307356865\\n\"\n  ],\n  \"outputs\": [\n    \"27\\n\",\n    \"26\\n\",\n    \"1\\n\",\n    \"2\\n\",\n    \"3533\\n\",\n    \"6720\\n\",\n    \"22840\\n\",\n    \"130952\\n\",\n    \"1016078777\\n\",\n    \"3220933257\\n\",\n    \"42\\n\",\n    \"2688\\n\",\n    \"42\\n\",\n    \"64\\n\",\n    \"31\\n\",\n    \"1\\n\",\n    \"4\\n\",\n    \"7\\n\",\n    \"641\\n\",\n    \"9\\n\",\n    \"16\\n\",\n    \"14\\n\",\n    \"5\\n\",\n    \"284\\n\",\n    \"71\\n\",\n    \"284\\n\",\n    \"41\\n\",\n    \"64\\n\",\n    \"1339\\n\",\n    \"1803\\n\",\n    \"214\\n\",\n    \"2583\\n\",\n    \"2621470\\n\",\n    \"2053\\n\",\n    \"4718599\\n\",\n    \"37\\n\",\n    \"34\\n\",\n    \"10485785\\n\",\n    \"14\\n\",\n    \"103\\n\",\n    \"5253588583\\n\",\n    \"20524\\n\",\n    \"2044\\n\",\n    \"32794\\n\",\n    \"2324\\n\",\n    \"1221804763\\n\"\n  ]\n}",
  "difficulty": "interview",
  "url": "https://codeforces.com/problemset/problem/976/E",
  "starter_code": ""
}