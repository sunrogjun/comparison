{
  "task_id": "APPS/339",
  "problem_id": 339,
  "prompt": "Right now she actually isn't. But she will be, if you don't solve this problem.\n\nYou are given integers n, k, A and B. There is a number x, which is initially equal to n. You are allowed to perform two types of operations:   Subtract 1 from x. This operation costs you A coins.  Divide x by k. Can be performed only if x is divisible by k. This operation costs you B coins.  What is the minimum amount of coins you have to pay to make x equal to 1?\n\n\n-----Input-----\n\nThe first line contains a single integer n (1 \u2264 n \u2264 2\u00b710^9).\n\nThe second line contains a single integer k (1 \u2264 k \u2264 2\u00b710^9).\n\nThe third line contains a single integer A (1 \u2264 A \u2264 2\u00b710^9).\n\nThe fourth line contains a single integer B (1 \u2264 B \u2264 2\u00b710^9).\n\n\n-----Output-----\n\nOutput a single integer\u00a0\u2014 the minimum amount of coins you have to pay to make x equal to 1.\n\n\n-----Examples-----\nInput\n9\n2\n3\n1\n\nOutput\n6\n\nInput\n5\n5\n2\n20\n\nOutput\n8\n\nInput\n19\n3\n4\n2\n\nOutput\n12\n\n\n\n-----Note-----\n\nIn the first testcase, the optimal strategy is as follows:   Subtract 1 from x (9 \u2192 8) paying 3 coins.  Divide x by 2 (8 \u2192 4) paying 1 coin.  Divide x by 2 (4 \u2192 2) paying 1 coin.  Divide x by 2 (2 \u2192 1) paying 1 coin. \n\nThe total cost is 6 coins.\n\nIn the second test case the optimal strategy is to subtract 1 from x 4 times paying 8 coins in total.",
  "solutions": "[\"import sys\\n\\ndef read_int():\\n    return int(input())\\n\\ndef read_ints():\\n    return [int(x) for x in input().split()]\\n\\nn = read_int()\\nk = read_int()\\na = read_int()\\nb = read_int()\\n\\ncost = 0\\n\\nif k == 1:\\n    cost = (n - 1) * a\\nelse:\\n    while n != 1:\\n        if n % k == 0:\\n            if b < (n - n // k) * a:\\n                cost += b\\n            else:\\n                cost += (n - n // k) * a\\n            n = n // k\\n        else:\\n            cost += (n % k) * a\\n            n -= n % k\\n            if n == 0:\\n                n += 1\\n                cost -= a\\n\\nprint(cost)\\n\", \"from sys import stdin, stdout\\nfrom random import randrange\\n\\nn = int(stdin.readline())\\nk = int(stdin.readline())\\na = int(stdin.readline())\\nb = int(stdin.readline())\\n\\nans = 0\\n\\nif k == 1:\\n    stdout.write(str((n - 1) * a))\\nelse:\\n    while n != 1:\\n        if n % k:\\n            ans += (n % k) * a\\n            n = (n // k) * k\\n            continue\\n        \\n        \\n        if (n - (n // k)) * a <= b:\\n            ans += (n - 1) * a\\n            n = 1\\n        else:\\n            ans += b\\n            n //= k\\n\\n    stdout.write(str(ans))\", \"x = int(input())\\nk = int(input())\\na = int(input())\\nb = int(input())\\n\\nc = 0\\n\\nwhile x > 1:\\n\\tif x % k > 0:\\n\\t\\tif x > k:\\t\\t\\t\\n\\t\\t\\tc += a * (x % k)\\n\\t\\t\\tx -= x % k\\n\\t\\telse:\\t\\n\\t\\t\\tc += a * (x % k - 1)\\n\\t\\t\\tx = 1\\n\\n\\telse:\\n\\t\\tif (x-x//k)*a >= b:\\n\\t\\t\\tc += b\\n\\t\\t\\tx = x//k\\n\\t\\telse:\\n\\t\\t\\tc += (x-1)*a\\n\\t\\t\\tx = 1\\n\\nprint(c)\\n\", \"n = int(input())\\nk = int(input())\\nA = int(input())\\nB = int(input())\\ncoins = 0\\nwhile (n!=1):\\n\\tif(n%k == 0 and ((n-n/k)*A) > B):\\n\\t\\tcoins += B\\n\\t\\tn/=k\\n\\telif (n%k == 0):\\n\\t\\tcoins += A*(n-1)\\n\\t\\tn = 1\\n\\telse:\\n\\t\\tcoins += A*(n%k)\\n\\t\\tn = n - (n%k)\\nprint(int(coins))\\n\", \"number = int(input())\\ndivisor = int(input())\\ndecrement_cost = int(input())\\ndivision_cost = int(input())\\n\\nfinal_cost = 0\\nwhile number != 1:\\n\\tremainder = number % divisor\\n\\tif remainder != 0:\\n\\t\\tfinal_cost += decrement_cost * remainder\\n\\t\\tnumber -= remainder\\n\\n\\tjump = number - number // divisor\\n\\n\\tif division_cost < jump * decrement_cost:\\n\\t\\tfinal_cost += division_cost\\n\\t\\tnumber //= divisor\\n\\telse:\\n\\t\\tfinal_cost += decrement_cost * (number - 1)\\n\\t\\tnumber = 1\\n\\nprint(final_cost)\", \"n = int(input())\\nk = int(input())\\na = int(input())\\nb = int(input())\\nc = 0\\nwhile(n>1):\\n    if(n<k):\\n        c += a*(n - 1)\\n        n = 1\\n    else:\\n        if(n%k!=0):\\n            t = n%k\\n            n -= t\\n            c += t*a\\n        else:\\n            if(b<(n-n//k)*a):\\n                n = n//k\\n                c += b\\n            else:\\n                c += a*(n - 1)\\n                n = 1\\nprint(c)\\n\", \"def solve(n, k, A, B):\\n    if k == 1:\\n        return A*(n-1)\\n    res = 0\\n    while n >= k:\\n        res += A * (n % k)\\n        n -= n % k\\n        diff = n-n//k\\n        if A*diff > B:\\n            res += B\\n            n //= k\\n        else:\\n            res += A*(n-1)\\n            n = 1 # finish loop\\n    res += A*(n-1)\\n    return res\\n\\nn, k, A, B = [int(input()) for i in range(4)]\\nprint(solve(n, k, A, B))\", \"n = int(input());\\nk = int(input());\\na = int(input());\\nb = int(input());\\n#inf = 100000000000000000000000000000;\\nost = 0;\\nres = 0;\\nwhile a * (n // k) + b + (n % k) * a < n * a:\\n    ost = ost + (n % k) * a;\\n    res = res + b;\\n    n = n // k;\\n#print(n);\\n#print(res);\\n#print(ost);\\nres = res + (n - 1) * a + ost;\\nprint(res);\", \"n=int(input())\\nk=int(input())\\na=int(input())\\nb=int(input())\\nans=0\\nif k==1:\\n    print((n-1)*a)\\n    return\\nelse:\\n    while n>1:\\n        ans+=(n%k)*a\\n        n-=n%k\\n        if b>(n-n//k)*a:\\n            print((n-1)*a+ans)\\n            return\\n        else:\\n            n//=k\\n            ans+=b\\nprint(ans)\\n    \\n    \\n    \\n\", \"n=int(input())\\nk=int(input())\\na=int(input())\\nb=int(input())\\nx=n\\nc=0\\nif k==1:\\n    c=a*(n-1)\\nelse:\\n    while x>=k:\\n        y=x%k\\n        c+=y*a\\n        x-=y\\n        c+=min(b,a*(x-x//k))\\n        x=(x//k)\\n    c+=a*(x-1)\\nprint(c)\", \"n = int(input())\\nk = int(input())\\nA = int(input())\\nB = int(input())\\n\\nans = 0\\nif k == 1:\\n\\tprint(A*(n-1))\\n\\treturn\\n\\nwhile n > 1:\\n\\tsubt = (n % k)\\n\\tans += A * subt\\n\\tn -= (n%k)\\n\\tans += min(A * (n - (n // k)),B)\\n\\tn //= k\\n\\nif n == 0:\\n\\tans -= A\\n\\nprint(ans)\", \"n = int(input())\\nk = int(input())\\na = int(input())\\nb = int(input())\\n\\nr = 0\\n\\nif k == 1:\\n    print((n - 1) * a)\\n    return\\n\\nwhile n != 1:\\n    if n % k != 0:\\n        r += n % k * a\\n        n -= n % k\\n    elif n < k:\\n        r += (n - 1) * a\\n        n = 1\\n    else:\\n        if n // k * (k - 1) * a < b:\\n            r += n // k * (k - 1) * a\\n        else:\\n            r += b\\n        n //= k\\nprint(r)\\n\", \"n=int(input())\\nk=int(input())\\na=int(input())\\nb=int(input())\\nans=0\\nif ((k==1)|(k>n))&(n!=1):\\n    ans=n*a-a\\n    n=1\\nwhile (n!=1):\\n    if (n%k==0):\\n        t=n//k\\n        y=n-t\\n        if (y*a<=b):\\n            ans+=n*a-a\\n            n=1\\n        else:\\n            ans+=b\\n            n=t\\n    else:\\n        ans+=(n%k)*a\\n        n-=n%k\\nprint(ans)\\n\", \"n = int(input())\\nk = int(input())\\na = int(input())\\nb = int(input())\\nx = n\\ncost = 0\\n\\nif k == 1:\\n    print(int((x - 1) * a))\\n    return\\n\\nwhile x > 1:\\n    if x < k:\\n        cost += (x - 1) * a\\n        break\\n    rem = x % k\\n    x -= rem\\n    cost += a * rem\\n    if rem == 0:\\n        temp = (x // k) * (k - 1)\\n        x //= k\\n        cost += min(temp * a, b)\\n\\nprint(cost)\\n\", \"from sys import stdin as cin\\n\\ndef main():\\n    n = int(cin.readline())\\n    k = int(cin.readline())\\n    a = int(cin.readline())\\n    b = int(cin.readline())\\n    o = 0\\n    if k == 1:\\n        print((n - 1) * a)\\n        return\\n    while n > 1:\\n        if n % k:\\n            t = n - n // k * k\\n            if t == n:\\n                t -= 1\\n            o += a * t\\n            n -= t\\n        else:\\n            t = n // k\\n            o += min(a * (n - t), b)\\n            n = t\\n        #print(n, o)\\n    print(o)\\n\\nmain()\\n\", \"n = int(input())\\nk = int(input())\\nA = int(input())\\nB = int(input())\\n\\nres = 0\\nwhile n>k:\\n    if n % k >0:\\n        res += (n%k) * A\\n        n -= (n%k)\\n\\n    dif  = n - (n//k)\\n    if dif*A > B:\\n        res += B\\n        n = n//k\\n    else:\\n        res += (n-1)*A\\n        n = 1\\n\\nif n == k:\\n    dif  = n - (n//k)\\n    if dif*A > B:\\n        res += B\\n        n = n//k\\n    else:\\n        res += (n-1)*A\\n        n = 1\\n\\nif n >1 :\\n    res += (n-1)*A\\n    n = 1\\nprint(res)\\n\", \"n = int(input())\\nk = int(input())\\na = int(input())\\nb = int(input())\\nans = 0\\nif k > 1:\\n    while n > 1:\\n        new_n = max(1, n // k * k)\\n        ans += (n - new_n) * a\\n        n = new_n\\n        while n % k == 0:\\n            new_n = n // k\\n            ans += min((n - new_n) * a, b)\\n            n = new_n\\nelse:\\n    ans = (n - 1) * a\\nprint(ans)\", \"n, k, A, B = (int(input()) for i in range(4))\\n\\nif k == 1:\\n    print((n - 1) * A)\\n\\nelse:\\n    x = n\\n    ans = 0\\n\\n    while x != 1:\\n        if 1 < x < k:\\n            ans += (x - 1) * A\\n            x = 1\\n        else:\\n            if x % k != 0:\\n                ans += (x - (x // k) * k) * A\\n                x = (x // k) * k\\n\\n            else:\\n                d = x - (x // k)\\n                ans += min(d * A, B)\\n                x //= k\\n\\n    print(ans)\\n\", \"inf = 0x3f3f3f3f3f3f3f3f\\nM = mod = 1000000007\\nmod2inv = 500000004\\npt = lambda *a, **k: print(*a, **k, flush=True)\\nrd = lambda: map(int, input().split())\\nn = int(input())\\nk = int(input())\\na = int(input())\\nb = int(input())\\nr = 0\\nif k == 1:\\n    print((n - 1) * a)\\n    return\\nwhile n:\\n    if n % k:\\n        r += n % k * a\\n        n -= n % k\\n    r += min(b, (n - n // k) * a)\\n    n //= k\\npt(r - a)\\n\", \"\\nn=int(input())\\nk=int(input())\\na=int(input())\\nb=int(input())\\nx=n\\nc=0\\n\\nif k==1:\\n\\tprint(a*(n-1))\\nelif k > x:\\n\\tprint(a*(x-1))\\nelse:\\n\\twhile x>=k:\\n\\t\\tif x%k==0:\\n\\t\\t\\ttemp=x/k\\n\\t\\t\\tif b < (x-(temp))*a:\\n\\t\\t\\t\\tc+=b\\n\\t\\t\\t\\tx=temp\\n\\t\\t\\telse:\\n\\t\\t\\t\\tc+=a*(x-(temp))\\n\\t\\t\\t\\tx=temp\\n\\t\\telse:\\n\\t\\t\\tt=x%k\\n\\t\\t\\tc+=(a*t)\\n\\t\\t\\tx=x-t\\n\\tif x==1:\\n\\t\\tprint(int(c))\\n\\telse:\\n\\t\\tprint(int(c)+int((x-1)*a))\\n\", \"n = int(input(\\\"\\\"))\\nk = int(input(\\\"\\\"))\\na = int(input(\\\"\\\"))\\nb = int(input(\\\"\\\"))\\n\\nans = 0\\nwhile not n == 1:\\n\\tm = n % k\\n\\tn = n - m\\n\\tans = ans + m*a\\n\\n\\tif (n-(n/k))*a > b:\\n\\t\\tn = n / k\\n\\t\\tans = ans + b\\n\\telse:\\n\\t\\tans = ans + (n-1)*a\\n\\t\\tn = 1\\nprint(int(ans)) \\n\\\"\\\"\\\"\\n\\tint64 ans = 0;\\n\\twhile(n != 1){\\n\\t\\tint64 m = n % k;\\n\\t\\tn -= m;\\n\\t\\t//cout << \\\"m \\\" << m << endl;\\n\\t\\tans += m*a;\\n\\n\\t\\tif((n-(n/k))*a > b){\\n\\t\\t\\tn /= k;\\n\\t\\t\\tans += b;\\n\\t\\t}else{\\n\\t\\t\\tans += (n-1)*a;\\n\\t\\t\\tcout << ans;\\n\\t\\t\\treturn 0;\\n\\t\\t}\\n\\n\\t}\\t\\n\\t\\n\\tcout << ans;\\n\\\"\\\"\\\"\", \"n = int(input())\\nk= int(input())\\na = int(input())\\nb = int(input())\\nres = 0\\nif k == 1:\\n    print((n - 1) * a)\\nelse:\\n    while n != 1:\\n        res += (n % k) * a\\n        if b > (n // k)*(k - 1) * a:\\n            res += (n // k)*(k - 1) * a\\n        else:\\n            res += b\\n        n //= k\\n        if n < k:\\n            res += (n - 1) * a\\n            break\\n    print(res)\", \"n = int(input())\\nk = int(input())\\nc1 = int(input())\\nc2 = int(input())\\nif k == 1:\\n\\tk += n\\nans = 0\\nwhile n > 1:\\n\\tif n > k:\\n\\t\\ttemp = n % k\\n\\t\\tans += temp * c1\\n\\t\\tn -= temp\\n\\tif n % k == 0:\\n\\t\\tans += min(c2, (n - n // k) * c1)\\n\\t\\tn //= k\\n\\telse:\\n\\t\\tans += (n - 1) * c1\\n\\t\\tn = 1\\nprint(ans)\", \"n = int(input())\\nk = int(input())\\na = int(input())\\nb = int(input())\\nans = 0\\nwhile n != 1:\\n    if n % k == 0:\\n        d = n // k\\n        if b >= (n-d)*a:\\n            ans += (n-1)*a\\n            n=1\\n        else:\\n            ans += b\\n            n = d\\n    else:\\n        r = n % k\\n        ans += r*a\\n        n = n - r\\nprint(ans)\"]",
  "input_output": "{\n  \"inputs\": [\n    \"9\\n2\\n3\\n1\\n\",\n    \"5\\n5\\n2\\n20\\n\",\n    \"19\\n3\\n4\\n2\\n\",\n    \"1845999546\\n999435865\\n1234234\\n2323423\\n\",\n    \"1604353664\\n1604353665\\n9993432\\n1\\n\",\n    \"777888456\\n1\\n98\\n43\\n\",\n    \"1162261467\\n3\\n1\\n2000000000\\n\",\n    \"1000000000\\n1999999999\\n789987\\n184569875\\n\",\n    \"2000000000\\n2\\n1\\n2000000000\\n\",\n    \"1999888325\\n3\\n2\\n2000000000\\n\",\n    \"1897546487\\n687\\n89798979\\n879876541\\n\",\n    \"20\\n1\\n20\\n1\\n\",\n    \"16\\n5\\n17\\n3\\n\",\n    \"19\\n19\\n19\\n1\\n\",\n    \"18\\n2\\n3\\n16\\n\",\n    \"1\\n11\\n8\\n9\\n\",\n    \"9\\n10\\n1\\n20\\n\",\n    \"19\\n10\\n19\\n2\\n\",\n    \"16\\n9\\n14\\n2\\n\",\n    \"15\\n2\\n5\\n2\\n\",\n    \"14\\n7\\n13\\n1\\n\",\n    \"43\\n3\\n45\\n3\\n\",\n    \"99\\n1\\n98\\n1\\n\",\n    \"77\\n93\\n100\\n77\\n\",\n    \"81\\n3\\n91\\n95\\n\",\n    \"78\\n53\\n87\\n34\\n\",\n    \"80\\n3\\n15\\n1\\n\",\n    \"97\\n24\\n4\\n24\\n\",\n    \"100\\n100\\n1\\n100\\n\",\n    \"87\\n4\\n17\\n7\\n\",\n    \"65\\n2\\n3\\n6\\n\",\n    \"1000000\\n1435\\n3\\n999999\\n\",\n    \"783464\\n483464\\n2\\n966928\\n\",\n    \"248035\\n11\\n3\\n20\\n\",\n    \"524287\\n2\\n945658\\n999756\\n\",\n    \"947352\\n78946\\n85\\n789654\\n\",\n    \"1000000\\n1\\n999899\\n60\\n\",\n    \"753687\\n977456\\n6547\\n456\\n\",\n    \"1000000\\n500000\\n1\\n999997\\n\",\n    \"997458\\n843596\\n1\\n843596\\n\",\n    \"821109\\n92\\n6547\\n98787\\n\",\n    \"1073741823\\n2\\n9543\\n8923453\\n\",\n    \"1000999777\\n1934999345\\n2356346\\n34534565\\n\",\n    \"2000000000\\n1\\n2000000000\\n98\\n\",\n    \"1999324353\\n978435356\\n1\\n978435356\\n\",\n    \"2000000000\\n2\\n2000000000\\n2000000000\\n\",\n    \"241375690\\n17\\n2\\n1998789654\\n\",\n    \"171507000\\n350\\n789\\n6548687\\n\",\n    \"1100220011\\n10001\\n2\\n1999778654\\n\",\n    \"1867622656\\n43216\\n789644\\n12315468\\n\",\n    \"1867622656\\n43216\\n1\\n1879865413\\n\",\n    \"1999999999\\n1000000000\\n789987\\n184569875\\n\",\n    \"1987987897\\n103546\\n7\\n98754563\\n\",\n    \"10\\n2\\n2\\n5\\n\",\n    \"7\\n2\\n1\\n100000\\n\",\n    \"7\\n2\\n3\\n1\\n\",\n    \"2000000000\\n666666667\\n1\\n1\\n\",\n    \"1999999997\\n666666666\\n2\\n2\\n\"\n  ],\n  \"outputs\": [\n    \"6\\n\",\n    \"8\\n\",\n    \"12\\n\",\n    \"1044857680578777\\n\",\n    \"16032999235141416\\n\",\n    \"76233068590\\n\",\n    \"1162261466\\n\",\n    \"789986999210013\\n\",\n    \"1999999999\\n\",\n    \"3333258884\\n\",\n    \"110398404423\\n\",\n    \"380\\n\",\n    \"54\\n\",\n    \"1\\n\",\n    \"40\\n\",\n    \"0\\n\",\n    \"8\\n\",\n    \"173\\n\",\n    \"100\\n\",\n    \"21\\n\",\n    \"14\\n\",\n    \"189\\n\",\n    \"9604\\n\",\n    \"7600\\n\",\n    \"380\\n\",\n    \"2209\\n\",\n    \"108\\n\",\n    \"40\\n\",\n    \"99\\n\",\n    \"106\\n\",\n    \"36\\n\",\n    \"1005804\\n\",\n    \"1566926\\n\",\n    \"202\\n\",\n    \"34963354\\n\",\n    \"790589\\n\",\n    \"999898000101\\n\",\n    \"4934382242\\n\",\n    \"999998\\n\",\n    \"997457\\n\",\n    \"394566\\n\",\n    \"188412866\\n\",\n    \"2358701818178496\\n\",\n    \"3999999998000000000\\n\",\n    \"1020888998\\n\",\n    \"84000000000\\n\",\n    \"482751378\\n\",\n    \"14216965\\n\",\n    \"1999998674\\n\",\n    \"24630936\\n\",\n    \"1867622655\\n\",\n    \"789987183779888\\n\",\n    \"98946650\\n\",\n    \"13\\n\",\n    \"6\\n\",\n    \"8\\n\",\n    \"666666668\\n\",\n    \"1333333334\\n\"\n  ]\n}",
  "difficulty": "interview",
  "url": "https://codeforces.com/problemset/problem/940/B",
  "starter_code": ""
}